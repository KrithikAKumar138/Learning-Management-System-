<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${course.title}">Course Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100 font-sans">



<div class="h-[60px] bg-indigo-600 text-white flex items-center justify-between px-6 shadow-md">
    <strong class="text-lg font-semibold" th:text="${course.title}"></strong>

    <a th:href="@{/admin/dashboard}"
       class="text-sm font-medium hover:underline flex items-center gap-1">
        ‚¨Ö Back
    </a>
</div>


<div class="flex h-[calc(100vh-60px)]">


    <aside class="w-[280px] bg-white border-r border-gray-200 p-5 overflow-y-auto">
        <h3 class="text-lg font-semibold mb-4 text-gray-700">Lessons</h3>

        <a th:each="lesson : ${lessons}"
           th:href="@{/admin/course/{cid}(cid=${course.id}, lessonId=${lesson.id})}"
           th:text="${lesson.title}"
           class="block px-3 py-2 mb-2 rounded-md text-sm text-gray-700 hover:bg-indigo-50 transition"
           th:classappend="${currentLesson != null and lesson.id == currentLesson.id}
     ? 'bg-indigo-600 text-white font-semibold hover:bg-indigo-600' : ''">
        </a>

        <hr class="my-4">

        <a th:href="@{/admin/course/{cid}(cid=${course.id}, view='quiz')}"
           class="block px-3 py-2 rounded-md text-sm hover:bg-indigo-50 transition"
           th:classappend="${view == 'quiz'}
     ? 'bg-indigo-600 text-white font-semibold hover:bg-indigo-600'
     : 'text-gray-700'">
            üìù Quiz (Preview)
        </a>

    </aside>


    <main class="flex-1 bg-black text-white p-8 overflow-y-auto">

        <div th:if="${view != 'quiz' and currentLesson != null}">

            <h2 class="text-2xl font-semibold mb-6"
                th:text="${currentLesson.title}"></h2>


            <div th:if="${currentLesson.contentType == 'VIDEO'}">
                <video controls
                       class="w-full h-[500px] rounded-lg bg-black shadow-lg">

                    <source th:src="${currentLesson.filePath}">

                </video>
            </div>


            <div th:if="${currentLesson.contentType == 'PDF'}">
                <iframe
                        class="w-full h-[500px] rounded-lg bg-black shadow-lg"
                        th:src="${currentLesson.filePath}">

                </iframe>
            </div>


            <div th:if="${currentLesson.contentType == 'TEXT'}">
                <pre class="whitespace-pre-wrap text-base bg-zinc-900 p-5 rounded-lg shadow-inner"
                     th:text="${currentLesson.content}">
                </pre>
            </div>


            <div th:if="${currentLesson.contentType == 'FILE'}">
                <a th:href="${currentLesson.filePath}"
                   target="_blank"
                   class="inline-block mt-4 px-6 py-3 bg-indigo-600 rounded-md text-white font-medium hover:bg-indigo-500 transition">
                    Download File
                </a>
            </div>
        </div>

        <div th:if="${view != 'quiz' and currentLesson == null}">
            <h3 class="text-xl text-gray-300">No lesson selected</h3>
        </div>

        <div th:if="${view == 'quiz'}">

            <h2 class="text-2xl font-semibold mb-6">Quiz Preview</h2>

            <div th:if="${#lists.isEmpty(quizQuestions)}"
                 class="text-gray-300">
                No quiz questions added yet.
            </div>

            <div th:each="q, stat : ${quizQuestions}"
                 class="mb-8 p-6 bg-zinc-900 rounded-xl shadow-lg">

                <h3 class="text-lg font-semibold mb-4"
                    th:text="'Q' + ${stat.count} + '. ' + ${q.question}">
                </h3>

                <ul class="space-y-2 text-sm">
                    <li th:classappend="${q.correctOption == 'A'}
                        ? 'text-green-500 font-semibold' : ''">
                        A. <span th:text="${q.optionA}"></span>
                    </li>
                    <li th:classappend="${q.correctOption == 'B'}
                        ? 'text-green-500 font-semibold' : ''">
                        B. <span th:text="${q.optionB}"></span>
                    </li>
                    <li th:classappend="${q.correctOption == 'C'}
                        ? 'text-green-500 font-semibold' : ''">
                        C. <span th:text="${q.optionC}"></span>
                    </li>
                    <li th:classappend="${q.correctOption == 'D'}
                        ? 'text-green-500 font-semibold' : ''">
                        D. <span th:text="${q.optionD}"></span>
                    </li>
                </ul>

                <p class="mt-4 text-green-500 font-semibold">
                    ‚úî Correct Answer:
                    <span th:text="${q.correctOption}"></span>
                </p>
            </div>
        </div>

    </main>
</div>

</body>
</html>
